
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Examples &mdash; pySFML 1.2.0 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pySFML 1.2.0 documentation" href="index.html" />
    <link rel="next" title="Tutorials" href="tutorials.html" />
    <link rel="prev" title="Getting started" href="gettingstarted.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tutorials.html" title="Tutorials"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="gettingstarted.html" title="Getting started"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">pySFML 1.2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#ftp" id="id1">Ftp</a></li>
<li><a class="reference internal" href="#pong" id="id2">Pong</a></li>
<li><a class="reference internal" href="#pyqt4" id="id3">PyQt4</a></li>
<li><a class="reference internal" href="#shader" id="id4">Shader</a></li>
<li><a class="reference internal" href="#sockets" id="id5">Sockets</a></li>
<li><a class="reference internal" href="#sound-capture" id="id6">Sound capture</a></li>
<li><a class="reference internal" href="#sound" id="id7">Sound</a></li>
<li><a class="reference internal" href="#voip" id="id8">Voip</a></li>
<li><a class="reference internal" href="#spacial-music" id="id9">Spacial Music</a></li>
</ul>
</div>
<p>If you downloaded a source archive or cloned pySFML2 from github, these examples
will be located in the examples subdirectory of the project&#8217;s root. A package
named &#8216;pysfml2-examples&#8217; is also available for Debian-based Linux
distributions, which allows you to run arbitrary examples by envoking a command
of the following form from a terminal:</p>
<div class="highlight-python"><pre>pysfml-&lt;example name&gt;</pre>
</div>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">pysfml</span><span class="o">-</span><span class="n">sound</span>
</pre></div>
</div>
<div class="section" id="ftp">
<h2><a class="toc-backref" href="#id1">Ftp</a><a class="headerlink" href="#ftp" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python3</span>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="c">#</span>
<span class="c"># pySFML - Python bindings for SFML</span>
<span class="c"># Copyright 2013, Jonathan De Wachter &lt;dewachter.jonathan@gmail.com&gt;</span>
<span class="c">#</span>
<span class="c"># This software is released under the LGPLv3 license.</span>
<span class="c"># You should have received a copy of the GNU Lesser General Public License</span>
<span class="c"># along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sfml.network</span> <span class="kn">as</span> <span class="nn">sf</span>

<span class="c"># python 2.* compatability</span>
<span class="k">try</span><span class="p">:</span> <span class="nb">input</span> <span class="o">=</span> <span class="nb">raw_input</span> 
<span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span> <span class="k">pass</span>

<span class="c"># choose the server address</span>
<span class="n">address</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">&quot;Enter the FTP server address: &quot;</span><span class="p">)</span>
<span class="n">address</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">IpAddress</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>

<span class="c"># create the server object which with you will communicate</span>
<span class="n">server</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Ftp</span><span class="p">()</span>

<span class="c"># connect to the server</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">response</span><span class="o">.</span><span class="n">ok</span><span class="p">:</span> <span class="nb">exit</span><span class="p">()</span>

<span class="c"># ask for user name and password</span>
<span class="n">user</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">&quot;User name: &quot;</span><span class="p">)</span>
<span class="n">password</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">&quot;Password: &quot;</span><span class="p">)</span>

<span class="c"># login to the server</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">response</span><span class="o">.</span><span class="n">ok</span><span class="p">:</span> <span class="nb">exit</span><span class="p">()</span>

<span class="c"># main menu</span>
<span class="n">choice</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;===========================================================&quot;</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;Choose an action:&quot;</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;1. Print working directory&quot;</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;2. Print contents of working directory&quot;</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;3. Change directory&quot;</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;4. Create directory&quot;</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;5. Delete directory&quot;</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;6. Rename file&quot;</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;7. Remove file&quot;</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;8. Download file&quot;</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;9. Upload file&quot;</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;0. Disconnect</span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">)</span>

	<span class="n">choice</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s">&quot;Your choice: &quot;</span><span class="p">))</span>

	<span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s">&#39;clear&#39;</span><span class="p">)</span>

	<span class="k">if</span> <span class="n">choice</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
		<span class="c"># print the current server directory</span>
		<span class="n">response</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">get_working_directory</span><span class="p">()</span>
		<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;Current directory is {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">get_directory</span><span class="p">()))</span>
	<span class="k">elif</span> <span class="n">choice</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
		<span class="c"># print the contents of the current server directory</span>
		<span class="n">response</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">get_directory_listing</span><span class="p">()</span>
		<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
		<span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">filenames</span><span class="p">:</span>
			<span class="k">print</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
	<span class="k">elif</span> <span class="n">choice</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
		<span class="c"># change the current directory</span>
		<span class="n">directory</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">&quot;Choose a directory: &quot;</span><span class="p">)</span>
		<span class="n">response</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">change_directory</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
	<span class="k">elif</span> <span class="n">choice</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
		<span class="c"># create a new directory</span>
		<span class="n">directory</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">&quot;Name of the directory to create: &quot;</span><span class="p">)</span>
		<span class="n">response</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">create_directory</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
	<span class="k">elif</span> <span class="n">choice</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
		<span class="c"># remove an existing directory</span>
		<span class="n">directory</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">&quot;Name of the directory to remove: &quot;</span><span class="p">)</span>
		<span class="n">response</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">delete_directory</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
	<span class="k">elif</span> <span class="n">choice</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
		<span class="c"># rename a file</span>
		<span class="n">source</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">&quot;Name of the file to rename: &quot;</span><span class="p">)</span>
		<span class="n">destination</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">&quot;New name: &quot;</span><span class="p">)</span>
		<span class="n">response</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">rename_file</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
	<span class="k">elif</span> <span class="n">choice</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
		<span class="c"># remove an existing directory</span>
		<span class="n">filename</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">&quot;Name of the file to remove: &quot;</span><span class="p">)</span>
		<span class="n">response</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">delete_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
	<span class="k">elif</span> <span class="n">choice</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
		<span class="c"># download a file from server</span>
		<span class="n">filename</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">&quot;Filename of the file to download (relative to current directory): &quot;</span><span class="p">)</span>
		<span class="n">directory</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">&quot;Directory to download the file to: &quot;</span><span class="p">)</span>
		<span class="n">response</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">directory</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
	<span class="k">elif</span> <span class="n">choice</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>
		<span class="c"># upload a file to server</span>
		<span class="n">filename</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">&quot;Path of the file to upload (absolute or relative to working directory): &quot;</span><span class="p">)</span>
		<span class="n">directory</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">&quot;Directory to upload the file to (relative to current directory): &quot;</span><span class="p">)</span>
		<span class="n">response</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">directory</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
	<span class="k">elif</span> <span class="n">choice</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
		<span class="k">break</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="c"># wrong choice</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;Invalid choice!&quot;</span><span class="p">)</span>
		<span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s">&#39;clear&#39;</span><span class="p">)</span>

	<span class="k">if</span> <span class="n">choice</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
		<span class="k">break</span>

<span class="c"># disconnect from the server</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Disconnecting from server...&quot;</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>

<span class="c"># wait until the user presses &#39;enter&#39; key</span>
<span class="nb">input</span><span class="p">(</span><span class="s">&quot;Press enter to exit...&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="pong">
<h2><a class="toc-backref" href="#id2">Pong</a><a class="headerlink" href="#pong" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python3</span>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="c">#</span>
<span class="c"># pySFML - Python bindings for SFML</span>
<span class="c"># Copyright 2013, Jonathan De Wachter &lt;dewachter.jonathan@gmail.com&gt;</span>
<span class="c">#</span>
<span class="c"># This software is released under the LGPLv3 license.</span>
<span class="c"># You should have received a copy of the GNU Lesser General Public License</span>
<span class="c"># along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>

<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">cos</span><span class="p">,</span> <span class="n">sin</span><span class="p">,</span> <span class="n">fabs</span><span class="p">,</span> <span class="n">pi</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>

<span class="kn">import</span> <span class="nn">sfml</span> <span class="kn">as</span> <span class="nn">sf</span>


<span class="c"># define some constants</span>
<span class="n">game_size</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Vector2</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">600</span><span class="p">)</span>
<span class="n">paddle_size</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Vector2</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">ball_radius</span> <span class="o">=</span> <span class="mf">10.</span>

<span class="c"># create the window of the application</span>
<span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">game_size</span>
<span class="n">window</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">RenderWindow</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">VideoMode</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">),</span> <span class="s">&quot;pySFML - Pong&quot;</span><span class="p">)</span>
<span class="n">window</span><span class="o">.</span><span class="n">vertical_synchronization</span> <span class="o">=</span> <span class="bp">True</span>

<span class="c"># load the sounds used in the game</span>
<span class="n">ball_sound_buffer</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">SoundBuffer</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s">&quot;data/ball.wav&quot;</span><span class="p">)</span>
<span class="n">ball_sound</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Sound</span><span class="p">(</span><span class="n">ball_sound_buffer</span><span class="p">)</span>

<span class="c"># create the left paddle</span>
<span class="n">left_paddle</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">RectangleShape</span><span class="p">()</span>
<span class="n">left_paddle</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">paddle_size</span> <span class="o">-</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">left_paddle</span><span class="o">.</span><span class="n">outline_thickness</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">left_paddle</span><span class="o">.</span><span class="n">outline_color</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">BLACK</span>
<span class="n">left_paddle</span><span class="o">.</span><span class="n">fill_color</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
<span class="n">left_paddle</span><span class="o">.</span><span class="n">origin</span> <span class="o">=</span> <span class="n">paddle_size</span> <span class="o">/</span> <span class="mi">2</span>

<span class="c"># create the right paddle</span>
<span class="n">right_paddle</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">RectangleShape</span><span class="p">()</span>
<span class="n">right_paddle</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">paddle_size</span> <span class="o">-</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">right_paddle</span><span class="o">.</span><span class="n">outline_thickness</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">right_paddle</span><span class="o">.</span><span class="n">outline_color</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">BLACK</span>
<span class="n">right_paddle</span><span class="o">.</span><span class="n">fill_color</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">right_paddle</span><span class="o">.</span><span class="n">origin</span> <span class="o">=</span> <span class="n">paddle_size</span> <span class="o">/</span> <span class="mi">2</span>

<span class="c"># create the ball</span>
<span class="n">ball</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">CircleShape</span><span class="p">()</span>
<span class="n">ball</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">ball_radius</span> <span class="o">-</span> <span class="mi">3</span>
<span class="n">ball</span><span class="o">.</span><span class="n">outline_thickness</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">ball</span><span class="o">.</span><span class="n">outline_color</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">BLACK</span>
<span class="n">ball</span><span class="o">.</span><span class="n">fill_color</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">WHITE</span>
<span class="n">ball</span><span class="o">.</span><span class="n">origin</span> <span class="o">=</span> <span class="p">(</span><span class="n">ball_radius</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ball_radius</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

<span class="c"># load the font</span>
<span class="n">font</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Font</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s">&quot;data/sansation.ttf&quot;</span><span class="p">)</span>

<span class="c"># initialize the pause message</span>
<span class="n">pause_message</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Text</span><span class="p">()</span>
<span class="n">pause_message</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">font</span>
<span class="n">pause_message</span><span class="o">.</span><span class="n">character_size</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">pause_message</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="mi">170</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>
<span class="n">pause_message</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">WHITE</span>
<span class="n">pause_message</span><span class="o">.</span><span class="n">string</span> <span class="o">=</span> <span class="s">&quot;Welcome to pySFML pong!</span><span class="se">\n</span><span class="s">Press space to start the game&quot;</span>

<span class="c"># define the paddles properties</span>
<span class="n">ai_timer</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Clock</span><span class="p">()</span>
<span class="n">ai_time</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">seconds</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">paddle_speed</span> <span class="o">=</span> <span class="mf">400.</span>
<span class="n">right_paddle_speed</span> <span class="o">=</span> <span class="mf">0.</span>
<span class="n">ball_speed</span> <span class="o">=</span> <span class="mf">400.</span>
<span class="n">ball_angle</span> <span class="o">=</span> <span class="mf">0.</span> <span class="c"># to be changed later</span>

<span class="n">clock</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Clock</span><span class="p">()</span>
<span class="n">is_playing</span> <span class="o">=</span> <span class="bp">False</span>

<span class="k">while</span> <span class="n">window</span><span class="o">.</span><span class="n">is_open</span><span class="p">:</span>

	<span class="c"># handle events</span>
	<span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">window</span><span class="o">.</span><span class="n">events</span><span class="p">:</span>
		<span class="c"># window closed or escape key pressed: exit</span>
		<span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="ow">is</span> <span class="n">sf</span><span class="o">.</span><span class="n">CloseEvent</span><span class="p">:</span>
			<span class="n">window</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

		<span class="c"># space key pressed: play</span>
		<span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="ow">is</span> <span class="n">sf</span><span class="o">.</span><span class="n">KeyEvent</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">pressed</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">code</span> <span class="ow">is</span> <span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">SPACE</span><span class="p">:</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">is_playing</span><span class="p">:</span>
				<span class="c"># (re)start the game</span>
				<span class="n">is_playing</span> <span class="o">=</span> <span class="bp">True</span>
				<span class="n">clock</span><span class="o">.</span><span class="n">restart</span><span class="p">()</span>

				<span class="c"># reset the position of the paddles and ball</span>
				<span class="n">left_paddle</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span> <span class="o">+</span> <span class="n">paddle_size</span><span class="o">.</span><span class="n">x</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">game_size</span><span class="o">.</span><span class="n">y</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
				<span class="n">right_paddle</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="n">game_size</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="mi">10</span> <span class="o">-</span> <span class="n">paddle_size</span><span class="o">.</span><span class="n">x</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">game_size</span><span class="o">.</span><span class="n">y</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
				<span class="n">ball</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">game_size</span> <span class="o">/</span> <span class="mi">2</span>

				<span class="c"># reset the ball angle</span>
				<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
					<span class="c"># make sure the ball initial angle is not too much vertical</span>
					<span class="n">ball_angle</span> <span class="o">=</span> <span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">32767</span><span class="p">)</span> <span class="o">%</span> <span class="mi">360</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">/</span> <span class="mi">360</span>
					<span class="k">if</span> <span class="ow">not</span> <span class="n">fabs</span><span class="p">(</span><span class="n">cos</span><span class="p">(</span><span class="n">ball_angle</span><span class="p">))</span> <span class="o">&lt;</span> <span class="mf">0.7</span><span class="p">:</span> <span class="k">break</span>

	<span class="k">if</span> <span class="n">is_playing</span><span class="p">:</span>
		<span class="n">delta_time</span> <span class="o">=</span> <span class="n">clock</span><span class="o">.</span><span class="n">restart</span><span class="p">()</span><span class="o">.</span><span class="n">seconds</span>

		<span class="c"># move the player&#39;s paddle</span>
		<span class="k">if</span> <span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">is_key_pressed</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">UP</span><span class="p">)</span> <span class="ow">and</span> <span class="n">left_paddle</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">paddle_size</span><span class="o">.</span><span class="n">y</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
			<span class="n">left_paddle</span><span class="o">.</span><span class="n">move</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">paddle_speed</span> <span class="o">*</span> <span class="n">delta_time</span><span class="p">))</span>

		<span class="k">elif</span> <span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">is_key_pressed</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">DOWN</span><span class="p">)</span> <span class="ow">and</span> <span class="n">left_paddle</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">paddle_size</span><span class="o">.</span><span class="n">y</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="n">game_size</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="mi">5</span><span class="p">:</span>
			<span class="n">left_paddle</span><span class="o">.</span><span class="n">position</span> <span class="o">+=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">paddle_speed</span> <span class="o">*</span> <span class="n">delta_time</span><span class="p">)</span>

		<span class="c"># move the computer&#39; paddle</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">right_paddle_speed</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">right_paddle</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">paddle_size</span><span class="o">.</span><span class="n">x</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">right_paddle_speed</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">right_paddle</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">paddle_size</span><span class="o">.</span><span class="n">y</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="n">game_size</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="mi">5</span><span class="p">):</span>
			<span class="n">right_paddle</span><span class="o">.</span><span class="n">position</span> <span class="o">+=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">right_paddle_speed</span> <span class="o">*</span> <span class="n">delta_time</span><span class="p">)</span>


		<span class="c"># update the computer&#39;s paddle direction according to the ball position</span>
		<span class="k">if</span> <span class="n">ai_timer</span><span class="o">.</span><span class="n">elapsed_time</span> <span class="o">&gt;</span> <span class="n">ai_time</span><span class="p">:</span>
			<span class="n">ai_timer</span><span class="o">.</span><span class="n">restart</span><span class="p">()</span>
			<span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">ball_radius</span> <span class="o">&gt;</span> <span class="n">right_paddle</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">paddle_size</span><span class="o">.</span><span class="n">y</span> <span class="o">/</span> <span class="mi">2</span><span class="p">:</span>
				<span class="n">right_paddle_speed</span> <span class="o">=</span> <span class="n">paddle_speed</span>
			<span class="k">elif</span> <span class="n">ball</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">ball_radius</span> <span class="o">&lt;</span> <span class="n">right_paddle</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">paddle_size</span><span class="o">.</span><span class="n">y</span> <span class="o">/</span> <span class="mi">2</span><span class="p">:</span>
				<span class="n">right_paddle_speed</span> <span class="o">=</span> <span class="o">-</span> <span class="n">paddle_speed</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">right_paddle_speed</span> <span class="o">=</span> <span class="mi">0</span>

		<span class="c"># move the ball</span>
		<span class="n">factor</span> <span class="o">=</span> <span class="n">ball_speed</span> <span class="o">*</span> <span class="n">delta_time</span>
		<span class="n">ball</span><span class="o">.</span><span class="n">move</span><span class="p">((</span><span class="n">cos</span><span class="p">(</span><span class="n">ball_angle</span><span class="p">)</span> <span class="o">*</span> <span class="n">factor</span><span class="p">,</span> <span class="n">sin</span><span class="p">(</span><span class="n">ball_angle</span><span class="p">)</span> <span class="o">*</span> <span class="n">factor</span><span class="p">))</span>

		<span class="c"># check collisions between the ball and the screen</span>
		<span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">ball_radius</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
			<span class="n">is_playing</span> <span class="o">=</span> <span class="bp">False</span>
			<span class="n">pause_message</span><span class="o">.</span><span class="n">string</span> <span class="o">=</span> <span class="s">&quot;You lost!</span><span class="se">\n</span><span class="s">Press space to restart or</span><span class="se">\n</span><span class="s">escape to exit&quot;</span>

		<span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">ball_radius</span> <span class="o">&gt;</span> <span class="n">game_size</span><span class="o">.</span><span class="n">x</span><span class="p">:</span>
			<span class="n">is_playing</span> <span class="o">=</span> <span class="bp">False</span>
			<span class="n">pause_message</span><span class="o">.</span><span class="n">string</span> <span class="o">=</span> <span class="s">&quot;You won !</span><span class="se">\n</span><span class="s">Press space to restart or</span><span class="se">\n</span><span class="s">escape to exit&quot;</span>

		<span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">ball_radius</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
			<span class="n">ball_sound</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>
			<span class="n">ball_angle</span> <span class="o">=</span> <span class="o">-</span> <span class="n">ball_angle</span>
			<span class="n">ball</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">ball_radius</span> <span class="o">+</span> <span class="mf">0.1</span>

		<span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">ball_radius</span> <span class="o">&gt;</span> <span class="n">game_size</span><span class="o">.</span><span class="n">y</span><span class="p">:</span>
			<span class="n">ball_sound</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>
			<span class="n">ball_angle</span> <span class="o">=</span> <span class="o">-</span> <span class="n">ball_angle</span>
			<span class="n">ball</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">game_size</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">ball_radius</span> <span class="o">-</span> <span class="mf">0.1</span>

		<span class="c"># check the collisions between the ball and the paddles</span>
		<span class="c"># left paddle</span>
		<span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">ball_radius</span> <span class="o">&lt;</span> <span class="n">left_paddle</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">paddle_size</span><span class="o">.</span><span class="n">x</span> <span class="o">/</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">ball</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">ball_radius</span> <span class="o">&gt;</span> <span class="n">left_paddle</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="ow">and</span> <span class="n">ball</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">ball_radius</span> <span class="o">&gt;=</span> <span class="n">left_paddle</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">paddle_size</span><span class="o">.</span><span class="n">y</span> <span class="o">/</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">ball</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">ball_radius</span> <span class="o">&lt;=</span> <span class="n">left_paddle</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">paddle_size</span><span class="o">.</span><span class="n">y</span> <span class="o">/</span> <span class="mi">2</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="n">left_paddle</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span><span class="p">:</span>
				<span class="n">ball_angle</span> <span class="o">=</span> <span class="n">pi</span> <span class="o">-</span> <span class="n">ball_angle</span> <span class="o">+</span> <span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">32767</span><span class="p">)</span> <span class="o">%</span> <span class="mi">20</span><span class="p">)</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">ball_angle</span> <span class="o">=</span> <span class="n">pi</span> <span class="o">-</span> <span class="n">ball_angle</span> <span class="o">-</span> <span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">32767</span><span class="p">)</span> <span class="o">%</span> <span class="mi">20</span><span class="p">)</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span>

			<span class="n">ball_sound</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>
			<span class="n">ball</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="n">left_paddle</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">ball_radius</span> <span class="o">+</span> <span class="n">paddle_size</span><span class="o">.</span><span class="n">x</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">ball</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

		<span class="c"># right paddle</span>
		<span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">ball_radius</span> <span class="o">&gt;</span> <span class="n">right_paddle</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">paddle_size</span><span class="o">.</span><span class="n">x</span> <span class="o">/</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">ball</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">ball_radius</span> <span class="o">&lt;</span> <span class="n">right_paddle</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="ow">and</span> <span class="n">ball</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">ball_radius</span> <span class="o">&gt;=</span> <span class="n">right_paddle</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">paddle_size</span><span class="o">.</span><span class="n">y</span> <span class="o">/</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">ball</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">ball_radius</span> <span class="o">&lt;=</span> <span class="n">right_paddle</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">paddle_size</span><span class="o">.</span><span class="n">y</span> <span class="o">/</span> <span class="mi">2</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="n">right_paddle</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span><span class="p">:</span>
				<span class="n">ball_angle</span> <span class="o">=</span> <span class="n">pi</span> <span class="o">-</span> <span class="n">ball_angle</span> <span class="o">+</span> <span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">32767</span><span class="p">)</span> <span class="o">%</span> <span class="mi">20</span><span class="p">)</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">ball_angle</span> <span class="o">=</span> <span class="n">pi</span> <span class="o">-</span> <span class="n">ball_angle</span> <span class="o">-</span> <span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">32767</span><span class="p">)</span> <span class="o">%</span> <span class="mi">20</span><span class="p">)</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span>

			<span class="n">ball_sound</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>
			<span class="n">ball</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="n">right_paddle</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">ball_radius</span> <span class="o">-</span> <span class="n">paddle_size</span><span class="o">.</span><span class="n">x</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">ball</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

	<span class="n">window</span><span class="o">.</span><span class="n">clear</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span>

	<span class="k">if</span> <span class="n">is_playing</span><span class="p">:</span>
		<span class="c"># draw the paddles and the ball</span>
		<span class="n">window</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">left_paddle</span><span class="p">)</span>
		<span class="n">window</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">right_paddle</span><span class="p">)</span>
		<span class="n">window</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ball</span><span class="p">)</span>

	<span class="k">else</span><span class="p">:</span>
		<span class="c"># draw the pause message</span>
		<span class="n">window</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">pause_message</span><span class="p">)</span>

	<span class="c"># display things on screen</span>
	<span class="n">window</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="pyqt4">
<h2><a class="toc-backref" href="#id3">PyQt4</a><a class="headerlink" href="#pyqt4" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python3</span>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="c">#</span>
<span class="c"># pySFML - Python bindings for SFML</span>
<span class="c"># Copyright 2013, Jonathan De Wachter &lt;dewachter.jonathan@gmail.com&gt;</span>
<span class="c">#</span>
<span class="c"># This software is released under the LGPLv3 license.</span>
<span class="c"># You should have received a copy of the GNU Lesser General Public License</span>
<span class="c"># along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>

<span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">platform</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">sip</span>
    <span class="kn">from</span> <span class="nn">PyQt4.QtCore</span> <span class="kn">import</span> <span class="o">*</span>
    <span class="kn">from</span> <span class="nn">PyQt4.QtGui</span> <span class="kn">import</span> <span class="o">*</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;Install PyQt4 and sip from Riverbank.&quot;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">sfml</span> <span class="kn">as</span> <span class="nn">sf</span>

<span class="k">class</span> <span class="nc">QSFMLCanvas</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">frameTime</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
		<span class="n">QWidget</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">initialized</span> <span class="o">=</span> <span class="bp">False</span>

		<span class="n">w</span> <span class="o">=</span> <span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">()</span>
		<span class="n">h</span> <span class="o">=</span> <span class="n">size</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_HandledWindow</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">HandledWindow</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_HandledWindow</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="s">&#39;draw&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_HandledWindow</span><span class="o">.</span><span class="n">draw</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="s">&#39;clear&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_HandledWindow</span><span class="o">.</span><span class="n">clear</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="s">&#39;view&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_HandledWindow</span><span class="o">.</span><span class="n">view</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="s">&#39;display&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_HandledWindow</span><span class="o">.</span><span class="n">display</span>

		<span class="c"># setup some states to allow direct rendering into the widget</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">WA_PaintOnScreen</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">WA_OpaquePaintEvent</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">WA_NoSystemBackground</span><span class="p">)</span>

		<span class="c"># set strong focus to enable keyboard events to be received</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">setFocusPolicy</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">StrongFocus</span><span class="p">);</span>

		<span class="c"># setup the widget geometry</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">position</span><span class="p">);</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">size</span><span class="p">);</span>

		<span class="c"># setup the timer</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">timer</span> <span class="o">=</span> <span class="n">QTimer</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">setInterval</span><span class="p">(</span><span class="n">frameTime</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">onInit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>

	<span class="k">def</span> <span class="nf">onUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">pass</span>

	<span class="k">def</span> <span class="nf">sizeHint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">paintEngine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="c"># let the derived class do its specific stuff</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">onUpdate</span><span class="p">()</span>

		<span class="c"># display on screen</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">showEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialized</span><span class="p">:</span>
			<span class="c"># under X11, we need to flush the commands sent to the server</span>
			<span class="c"># to ensure that SFML will get an updated view of the windows</span>
			<span class="c"># create the SFML window with the widget handle</span>
			<span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s">&#39;Linux&#39;</span><span class="p">:</span>
				<span class="kn">import</span> <span class="nn">sfml.x11</span> <span class="kn">as</span> <span class="nn">x11</span>
				<span class="n">display</span> <span class="o">=</span> <span class="n">sip</span><span class="o">.</span><span class="n">unwrapinstance</span><span class="p">(</span><span class="n">QX11Info</span><span class="o">.</span><span class="n">display</span><span class="p">())</span>
				<span class="n">x11</span><span class="o">.</span><span class="n">flush_screen</span><span class="p">(</span><span class="n">display</span><span class="p">)</span>

			<span class="bp">self</span><span class="o">.</span><span class="n">_HandledWindow</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">winId</span><span class="p">())</span>

			<span class="c"># let the derived class do its specific stuff</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">onInit</span><span class="p">()</span>

			<span class="c"># setup the timer to trigger a refresh at specified framerate</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="p">,</span><span class="n">SIGNAL</span><span class="p">(</span><span class="s">&#39;timeout()&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="s">&#39;repaint()&#39;</span><span class="p">))</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

			<span class="bp">self</span><span class="o">.</span><span class="n">initialized</span> <span class="o">=</span> <span class="bp">True</span>

	<span class="k">def</span> <span class="nf">paintEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
		<span class="k">return</span> <span class="bp">None</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="shader">
<h2><a class="toc-backref" href="#id4">Shader</a><a class="headerlink" href="#shader" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python3</span>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="c">#</span>
<span class="c"># pySFML - Python bindings for SFML</span>
<span class="c"># Copyright 2013, Jonathan De Wachter &lt;dewachter.jonathan@gmail.com&gt;</span>
<span class="c">#</span>
<span class="c"># This software is released under the LGPLv3 license.</span>
<span class="c"># You should have received a copy of the GNU Lesser General Public License</span>
<span class="c"># along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>

<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">cos</span>

<span class="kn">import</span> <span class="nn">sfml</span> <span class="kn">as</span> <span class="nn">sf</span>

<span class="k">class</span> <span class="nc">Effect</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Drawable</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
		<span class="n">sf</span><span class="o">.</span><span class="n">Drawable</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		
		<span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">is_loaded</span> <span class="o">=</span> <span class="bp">False</span>
		
	<span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
		
	<span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">is_loaded</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Shader</span><span class="o">.</span><span class="n">is_available</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_load</span><span class="p">()</span>
		
	<span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_loaded</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">on_update</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
			
	<span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">states</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_loaded</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">on_draw</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">states</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">error</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="s">&quot;Shader not</span><span class="se">\n</span><span class="s">supported&quot;</span><span class="p">)</span>
			<span class="n">error</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="mi">320</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
			<span class="n">error</span><span class="o">.</span><span class="n">character_size</span> <span class="o">=</span> <span class="mi">36</span>
			<span class="n">target</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">states</span><span class="p">)</span>	

	<span class="n">name</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_name</span><span class="p">)</span>
	
<span class="k">class</span> <span class="nc">Pixelate</span><span class="p">(</span><span class="n">Effect</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">Effect</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&#39;pixelate&#39;</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="c"># load the texture and initialize the sprite</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">texture</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Texture</span><span class="o">.</span><span class="n">load_from_file</span><span class="p">(</span><span class="s">&quot;data/background.jpg&quot;</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Sprite</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texture</span><span class="p">)</span>
			
			<span class="c"># load the shader</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">shader</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Shader</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">fragment</span><span class="o">=</span><span class="s">&quot;data/pixelate.frag&quot;</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">shader</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s">&quot;texture&quot;</span><span class="p">)</span>
			
		<span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
			<span class="k">print</span><span class="p">(</span><span class="s">&quot;An error occured: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">error</span><span class="p">))</span>
			<span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
			
		<span class="k">return</span> <span class="bp">True</span>
			
	<span class="k">def</span> <span class="nf">on_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">shader</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s">&quot;pixel_threshold&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="mi">30</span><span class="p">)</span>
		
	<span class="k">def</span> <span class="nf">on_draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">states</span><span class="p">):</span>
		<span class="n">states</span><span class="o">.</span><span class="n">shader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shader</span>
		<span class="n">target</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="p">,</span> <span class="n">states</span><span class="p">)</span>
		
		
<span class="k">class</span> <span class="nc">WaveBlur</span><span class="p">(</span><span class="n">Effect</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">Effect</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&#39;wave + blur&#39;</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&quot;data/text.txt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="nb">file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">character_size</span> <span class="o">=</span> <span class="mi">22</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
		
		<span class="k">try</span><span class="p">:</span>
			<span class="c"># load the shader</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">shader</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Shader</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s">&quot;data/wave.vert&quot;</span><span class="p">,</span> <span class="s">&quot;data/blur.frag&quot;</span><span class="p">)</span>
			
		<span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
			<span class="k">print</span><span class="p">(</span><span class="s">&quot;An error occured: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">error</span><span class="p">))</span>
			<span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
			
		<span class="k">return</span> <span class="bp">True</span>
		
	<span class="k">def</span> <span class="nf">on_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">shader</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s">&quot;wave_phase&quot;</span><span class="p">,</span> <span class="n">time</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">shader</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s">&quot;wave_amplitude&quot;</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">40</span><span class="p">,</span> <span class="n">y</span> <span class="o">*</span> <span class="mi">40</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">shader</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s">&quot;blur_radius&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.008</span><span class="p">)</span>
		
	<span class="k">def</span> <span class="nf">on_draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">states</span><span class="p">):</span>
		<span class="n">states</span><span class="o">.</span><span class="n">shader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shader</span>
		<span class="n">target</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">states</span><span class="p">)</span>
		

<span class="k">class</span> <span class="nc">StormBlink</span><span class="p">(</span><span class="n">Effect</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">Effect</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&#39;storm + blink&#39;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">VertexArray</span><span class="p">()</span>
		
	<span class="k">def</span> <span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="c"># create the points</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">primitive_type</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">PrimitiveType</span><span class="o">.</span><span class="n">POINTS</span>
		
		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">40000</span><span class="p">):</span>
			<span class="n">x</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">32767</span><span class="p">)</span> <span class="o">%</span> <span class="mi">800</span>
			<span class="n">y</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">32767</span><span class="p">)</span> <span class="o">%</span> <span class="mi">600</span>
			<span class="n">r</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">32767</span><span class="p">)</span> <span class="o">%</span> <span class="mi">255</span>
			<span class="n">g</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">32767</span><span class="p">)</span> <span class="o">%</span> <span class="mi">255</span>
			<span class="n">b</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">32767</span><span class="p">)</span> <span class="o">%</span> <span class="mi">255</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Vertex</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Vector2</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">sf</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">)))</span>
			
		<span class="k">try</span><span class="p">:</span>
			<span class="c"># load the shader</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">shader</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Shader</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s">&quot;data/storm.vert&quot;</span><span class="p">,</span> <span class="s">&quot;data/blink.frag&quot;</span><span class="p">)</span>
			
		<span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
			<span class="k">print</span><span class="p">(</span><span class="s">&quot;An error occured: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">error</span><span class="p">))</span>
			<span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
		
		<span class="k">return</span> <span class="bp">True</span>
		
	<span class="k">def</span> <span class="nf">on_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
		<span class="n">radius</span> <span class="o">=</span> <span class="mi">200</span> <span class="o">+</span> <span class="n">cos</span><span class="p">(</span><span class="n">time</span><span class="p">)</span> <span class="o">*</span> <span class="mi">150</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">shader</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s">&quot;storm_position&quot;</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">800</span><span class="p">,</span> <span class="n">y</span> <span class="o">*</span> <span class="mi">600</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">shader</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s">&quot;storm_inner_radius&quot;</span><span class="p">,</span> <span class="n">radius</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">shader</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s">&quot;storm_total_radius&quot;</span><span class="p">,</span> <span class="n">radius</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">shader</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s">&quot;blink_alpha&quot;</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="n">cos</span><span class="p">(</span><span class="n">time</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.25</span><span class="p">)</span>
		
	<span class="k">def</span> <span class="nf">on_draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">states</span><span class="p">):</span>
		<span class="n">states</span><span class="o">.</span><span class="n">shader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shader</span>
		<span class="n">target</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">,</span> <span class="n">states</span><span class="p">)</span>
		
<span class="k">class</span> <span class="nc">Edge</span><span class="p">(</span><span class="n">Effect</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">Effect</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;edge post-effect&quot;</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">on_load</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="c"># create the off-screen surface</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">surface</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">RenderTexture</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">600</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">surface</span><span class="o">.</span><span class="n">smooth</span> <span class="o">=</span> <span class="bp">True</span>
		
		<span class="c"># load the textures</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">background_texture</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Texture</span><span class="o">.</span><span class="n">load_from_file</span><span class="p">(</span><span class="s">&quot;data/sfml.png&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">background_texture</span><span class="o">.</span><span class="n">smooth</span> <span class="o">=</span> <span class="bp">True</span>
		
		<span class="bp">self</span><span class="o">.</span><span class="n">entity_texture</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Texture</span><span class="o">.</span><span class="n">load_from_file</span><span class="p">(</span><span class="s">&quot;data/devices.png&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">entity_texture</span><span class="o">.</span><span class="n">smooth</span> <span class="o">=</span> <span class="bp">True</span>
		
		<span class="c"># initialize the background sprite</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">background_sprite</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Sprite</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">background_texture</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">background_sprite</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="mi">135</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
		
		<span class="c"># load the moving entities</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">entities</span> <span class="o">=</span> <span class="p">[]</span>
		
		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
			<span class="n">sprite</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Sprite</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity_texture</span><span class="p">,</span> <span class="p">(</span><span class="mi">96</span> <span class="o">*</span> <span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">96</span><span class="p">,</span> <span class="mi">96</span><span class="p">))</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sprite</span><span class="p">)</span>
			
		<span class="c"># load the shader</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">shader</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Shader</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">fragment</span><span class="o">=</span><span class="s">&quot;data/edge.frag&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">shader</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s">&quot;texture&quot;</span><span class="p">)</span>
		
		<span class="k">return</span> <span class="bp">True</span>
		
	<span class="k">def</span> <span class="nf">on_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">shader</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="s">&quot;edge_threshold&quot;</span><span class="p">,</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
		
		<span class="c"># update the position of the moving entities</span>
		<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">entity</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="p">):</span>
			<span class="n">x</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="mf">0.25</span> <span class="o">*</span> <span class="p">(</span><span class="n">time</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="p">)</span> <span class="o">-</span> <span class="n">i</span><span class="p">)))</span> <span class="o">*</span> <span class="mi">300</span> <span class="o">+</span> <span class="mi">350</span>
			<span class="n">y</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="mf">0.25</span> <span class="o">*</span> <span class="p">(</span><span class="n">time</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="p">)</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="n">i</span><span class="p">))</span> <span class="o">*</span> <span class="mi">200</span> <span class="o">+</span> <span class="mi">250</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
		
		<span class="c"># render the updated scene to the off-screen surface</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">surface</span><span class="o">.</span><span class="n">clear</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">WHITE</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">surface</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">background_sprite</span><span class="p">)</span>
		
		<span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">surface</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
			
		<span class="bp">self</span><span class="o">.</span><span class="n">surface</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
		
	<span class="k">def</span> <span class="nf">on_draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">states</span><span class="p">):</span>
		<span class="n">states</span><span class="o">.</span><span class="n">shader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shader</span>
		<span class="n">target</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Sprite</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">surface</span><span class="o">.</span><span class="n">texture</span><span class="p">),</span> <span class="n">states</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
	<span class="c"># create the main window</span>
	<span class="n">window</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">RenderWindow</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">VideoMode</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">600</span><span class="p">),</span> <span class="s">&quot;pySFML - Shader&quot;</span><span class="p">)</span>
	<span class="n">window</span><span class="o">.</span><span class="n">vertical_synchronization</span> <span class="o">=</span> <span class="bp">True</span>
	
	<span class="c"># create the effects</span>
	<span class="n">effects</span> <span class="o">=</span> <span class="p">(</span><span class="n">Pixelate</span><span class="p">(),</span> <span class="n">WaveBlur</span><span class="p">(),</span> <span class="n">StormBlink</span><span class="p">(),</span> <span class="n">Edge</span><span class="p">())</span>
	<span class="n">current</span> <span class="o">=</span> <span class="mi">0</span>
	
	<span class="c"># initialize them</span>
	<span class="k">for</span> <span class="n">effect</span> <span class="ow">in</span> <span class="n">effects</span><span class="p">:</span> <span class="n">effect</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
	
	<span class="c"># create the message background</span>
	<span class="k">try</span><span class="p">:</span>
		<span class="n">text_background_texture</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Texture</span><span class="o">.</span><span class="n">load_from_file</span><span class="p">(</span><span class="s">&quot;data/text-background.png&quot;</span><span class="p">)</span>
	
	<span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;An error occured: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">error</span><span class="p">))</span>
		<span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
		
	<span class="n">text_background</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Sprite</span><span class="p">(</span><span class="n">text_background_texture</span><span class="p">)</span>
	<span class="n">text_background</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">520</span><span class="p">)</span>
	<span class="n">text_background</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
	
	<span class="c"># load the messages font</span>
	<span class="k">try</span><span class="p">:</span>
		<span class="n">font</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Font</span><span class="o">.</span><span class="n">load_from_file</span><span class="p">(</span><span class="s">&quot;data/sansation.ttf&quot;</span><span class="p">)</span>
	
	<span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;An error occured: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">error</span><span class="p">))</span>
		<span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
		
	<span class="c"># create the description text</span>
	<span class="n">description</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="s">&quot;Current effect: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">effects</span><span class="p">[</span><span class="n">current</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">),</span> <span class="n">font</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
	<span class="n">description</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">530</span><span class="p">)</span>
	<span class="n">description</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">80</span><span class="p">)</span>
	
	<span class="c"># create the instructions text</span>
	<span class="n">instructions</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="s">&quot;Press left and right arrows to change the current shader&quot;</span><span class="p">,</span> <span class="n">font</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
	<span class="n">instructions</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="mi">280</span><span class="p">,</span> <span class="mi">555</span><span class="p">)</span>
	<span class="n">instructions</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">80</span><span class="p">)</span>

	<span class="n">clock</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Clock</span><span class="p">()</span>
	
	<span class="c"># start the game loop</span>
	<span class="k">while</span> <span class="n">window</span><span class="o">.</span><span class="n">is_open</span><span class="p">:</span>
		
		<span class="c"># update the current example</span>
		<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Mouse</span><span class="o">.</span><span class="n">get_position</span><span class="p">(</span><span class="n">window</span><span class="p">)</span> <span class="o">/</span> <span class="n">window</span><span class="o">.</span><span class="n">size</span>
		<span class="n">effects</span><span class="p">[</span><span class="n">current</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">clock</span><span class="o">.</span><span class="n">elapsed_time</span><span class="o">.</span><span class="n">seconds</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
		
		<span class="c"># process events</span>
		<span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">window</span><span class="o">.</span><span class="n">events</span><span class="p">:</span>
			
			<span class="c"># close window: exit</span>
			<span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="ow">is</span> <span class="n">sf</span><span class="o">.</span><span class="n">CloseEvent</span><span class="p">:</span>
				<span class="n">window</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
				
			<span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="ow">is</span> <span class="n">sf</span><span class="o">.</span><span class="n">KeyEvent</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">pressed</span><span class="p">:</span>
				<span class="c"># escapte key: exit</span>
				<span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">ESCAPE</span><span class="p">:</span>
					<span class="n">window</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
					
				<span class="c"># left arrow key: previous shader</span>
				<span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">code</span> <span class="ow">is</span> <span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">LEFT</span><span class="p">:</span>
					<span class="k">if</span> <span class="n">current</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="n">current</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">effects</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
					<span class="k">else</span><span class="p">:</span> <span class="n">current</span> <span class="o">-=</span> <span class="mi">1</span>
					
					<span class="n">description</span><span class="o">.</span><span class="n">string</span> <span class="o">=</span> <span class="s">&quot;Current effect: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">effects</span><span class="p">[</span><span class="n">current</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
					
				<span class="c"># right arrow key: next shader</span>
				<span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">code</span> <span class="ow">is</span> <span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">RIGHT</span><span class="p">:</span>
					<span class="k">if</span> <span class="n">current</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">effects</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span> <span class="n">current</span> <span class="o">=</span> <span class="mi">0</span>
					<span class="k">else</span><span class="p">:</span> <span class="n">current</span> <span class="o">+=</span> <span class="mi">1</span>
					
					<span class="n">description</span><span class="o">.</span><span class="n">string</span> <span class="o">=</span> <span class="s">&quot;Current effect: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">effects</span><span class="p">[</span><span class="n">current</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

		
		<span class="c"># clear the window</span>
		<span class="n">window</span><span class="o">.</span><span class="n">clear</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
		
		<span class="c"># draw the current example</span>
		<span class="n">window</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">effects</span><span class="p">[</span><span class="n">current</span><span class="p">])</span>
		
		<span class="c"># draw the text</span>
		<span class="n">window</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">text_background</span><span class="p">)</span>
		<span class="n">window</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">instructions</span><span class="p">)</span>
		<span class="n">window</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">description</span><span class="p">)</span>
		
		<span class="c"># finally, display the rendered frame on screen</span>
		<span class="n">window</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="sockets">
<h2><a class="toc-backref" href="#id5">Sockets</a><a class="headerlink" href="#sockets" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python3</span>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="c">#</span>
<span class="c"># pySFML - Python bindings for SFML</span>
<span class="c"># Copyright 2013, Jonathan De Wachter &lt;dewachter.jonathan@gmail.com&gt;</span>
<span class="c">#</span>
<span class="c"># This software is released under the LGPLv3 license.</span>
<span class="c"># You should have received a copy of the GNU Lesser General Public License</span>
<span class="c"># along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>

<span class="kn">import</span> <span class="nn">sfml.network</span> <span class="kn">as</span> <span class="nn">sf</span>

<span class="c"># python 2.* compatability</span>
<span class="k">try</span><span class="p">:</span> <span class="nb">input</span> <span class="o">=</span> <span class="nb">raw_input</span> 
<span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span> <span class="k">pass</span>

<span class="k">def</span> <span class="nf">run_tcp_server</span><span class="p">():</span>
	<span class="sd">&quot;&quot;&quot; Launch a server. The server waits for an incoming connection,</span>
<span class="sd">	sends a message and waits for the answer. &quot;&quot;&quot;</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="c"># create a server socket to accept new connections</span>
		<span class="n">listener</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">TcpListener</span><span class="p">()</span>

		<span class="c"># listen to the given port for incoming connections</span>
		<span class="n">listener</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">PORT</span><span class="p">)</span>

		<span class="k">print</span><span class="p">(</span><span class="s">&quot;Server is listening to port {0}, waiting for connections...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">PORT</span><span class="p">))</span>

		<span class="c"># wait for a connection</span>
		<span class="n">socket</span> <span class="o">=</span> <span class="n">listener</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;Client connected: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">remote_address</span><span class="p">))</span>

		<span class="c"># send a message to the connected client</span>
		<span class="n">message</span> <span class="o">=</span> <span class="s">&quot;Hi, I&#39;m the server&quot;</span>
		<span class="n">socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">))</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;Message sent to the client: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="p">))</span>

		<span class="c"># recieve a message back from the client</span>
		<span class="n">answer</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">receive</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;Answer received from the client: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">answer</span><span class="p">))</span>

	<span class="k">except</span> <span class="n">sf</span><span class="o">.</span><span class="n">SocketException</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;An error occured!&quot;</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
		<span class="k">return</span>

<span class="k">def</span> <span class="nf">run_tcp_client</span><span class="p">():</span>
	<span class="sd">&quot;&quot;&quot; Create a client. The client is connected to a server, displays</span>
<span class="sd">	the welcome message and sends an answer. &quot;&quot;&quot;</span>

	<span class="n">server</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">&quot;Type the address or name of the server to connect to: &quot;</span><span class="p">)</span>
	<span class="n">server</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">IpAddress</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">server</span><span class="p">)</span>

	<span class="c"># create a socket for communicating with the server</span>
	<span class="n">socket</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">TcpSocket</span><span class="p">()</span>

	<span class="c"># connect to the server</span>
	<span class="k">try</span><span class="p">:</span>
		<span class="n">socket</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">server</span><span class="p">,</span> <span class="n">PORT</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;Connected to server {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">server</span><span class="p">))</span>

		<span class="c"># receive a message from the server</span>
		<span class="n">message</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">receive</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;Message received from the server: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="p">))</span>

		<span class="c"># send an answer to the server</span>
		<span class="n">answer</span> <span class="o">=</span> <span class="s">&quot;Hi, I&#39;m a client&quot;</span>
		<span class="n">socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">answer</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">))</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;Message sent to the server: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">answer</span><span class="p">))</span>

	<span class="k">except</span> <span class="n">sf</span><span class="o">.</span><span class="n">SocketException</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;An error occured!&quot;</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
		<span class="k">return</span>

<span class="k">def</span> <span class="nf">run_udp_server</span><span class="p">():</span>
	<span class="sd">&quot;&quot;&quot; Launch a server. The server waits for a message then sends an</span>
<span class="sd">	answer. &quot;&quot;&quot;</span>

	<span class="c"># create a socket to receive a message from anyone</span>
	<span class="n">socket</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">UdpSocket</span><span class="p">()</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="c"># listen to messages on the specified port</span>
		<span class="n">socket</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">PORT</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;Server is listening to port {0}, waiting for message...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">PORT</span><span class="p">))</span>

		<span class="c"># wait for a message</span>
		<span class="n">message</span><span class="p">,</span> <span class="n">ip</span><span class="p">,</span> <span class="n">port</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">receive</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;Message received from client {0}: {1}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ip</span><span class="p">,</span> <span class="n">message</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">)))</span>

		<span class="c"># send an answer to the client</span>
		<span class="n">answer</span> <span class="o">=</span> <span class="s">&quot;Hi, I&#39;m the server&quot;</span>
		<span class="n">socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">answer</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">),</span> <span class="n">ip</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;Message sent to the client: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">answer</span><span class="p">))</span>

	<span class="k">except</span> <span class="n">sf</span><span class="o">.</span><span class="n">SocketException</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;An error occured!&quot;</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
		<span class="k">return</span>

<span class="k">def</span> <span class="nf">run_udp_client</span><span class="p">():</span>
	<span class="sd">&quot;&quot;&quot; Send a message to the server, wait for the answer. &quot;&quot;&quot;</span>

	<span class="c"># ask for the server address</span>
	<span class="n">server</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">&quot;Type the address or name of the server to connect to: &quot;</span><span class="p">)</span>
	<span class="n">server</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">IpAddress</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">server</span><span class="p">)</span>

	<span class="c"># create a socket for communicating with the server</span>
	<span class="n">socket</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">UdpSocket</span><span class="p">()</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="c"># send a message to the server</span>
		<span class="n">message</span> <span class="o">=</span> <span class="s">&quot;Hi, I&#39;m a client&quot;</span>
		<span class="n">socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">),</span> <span class="n">server</span><span class="p">,</span> <span class="n">PORT</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;Message sent to the server: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="p">))</span>

		<span class="c"># receive an answer from anyone (but most likely from the server)</span>
		<span class="n">answer</span><span class="p">,</span> <span class="n">ip</span><span class="p">,</span> <span class="n">port</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">receive</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;Message received from {0}: {1}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ip</span><span class="p">,</span> <span class="n">answer</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">)))</span>

	<span class="k">except</span> <span class="n">sf</span><span class="o">.</span><span class="n">SocketException</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;An error occured!&quot;</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
		<span class="k">return</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
	<span class="c"># choose an arbitrary port for opening sockets</span>
	<span class="n">PORT</span> <span class="o">=</span> <span class="mi">50001</span>

	<span class="c"># TCP or UDP ?</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;Do you want to use TCP (t) or UDP (u) ?&quot;</span><span class="p">)</span>
	<span class="n">protocol</span> <span class="o">=</span> <span class="nb">input</span><span class="p">()</span>

	<span class="c"># client or server ?</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;Do you want to be a server (s) or a client (c) ?&quot;</span><span class="p">)</span>
	<span class="n">who</span> <span class="o">=</span> <span class="nb">input</span><span class="p">()</span>

	<span class="k">if</span> <span class="n">protocol</span> <span class="o">==</span> <span class="s">&#39;t&#39;</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">who</span> <span class="o">==</span> <span class="s">&#39;s&#39;</span><span class="p">:</span> <span class="n">run_tcp_server</span><span class="p">()</span>
		<span class="k">else</span><span class="p">:</span> <span class="n">run_tcp_client</span><span class="p">()</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">who</span> <span class="o">==</span> <span class="s">&#39;s&#39;</span><span class="p">:</span> <span class="n">run_udp_server</span><span class="p">()</span>
		<span class="k">else</span><span class="p">:</span> <span class="n">run_udp_client</span><span class="p">()</span>

	<span class="nb">input</span><span class="p">(</span><span class="s">&quot;Press any key to exit...&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="sound-capture">
<h2><a class="toc-backref" href="#id6">Sound capture</a><a class="headerlink" href="#sound-capture" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python3</span>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="c">#</span>
<span class="c"># pySFML - Python bindings for SFML</span>
<span class="c"># Copyright 2013, Jonathan De Wachter &lt;dewachter.jonathan@gmail.com&gt;</span>
<span class="c">#</span>
<span class="c"># This software is released under the LGPLv3 license.</span>
<span class="c"># You should have received a copy of the GNU Lesser General Public License</span>
<span class="c"># along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>

<span class="kn">import</span> <span class="nn">sfml</span> <span class="kn">as</span> <span class="nn">sf</span>

<span class="c"># python 2.* compatability</span>
<span class="k">try</span><span class="p">:</span> <span class="nb">input</span> <span class="o">=</span> <span class="nb">raw_input</span> 
<span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span> <span class="k">pass</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
	<span class="c"># check that the device can capture audio</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">sf</span><span class="o">.</span><span class="n">SoundRecorder</span><span class="o">.</span><span class="n">is_available</span><span class="p">():</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;Sorry, audio capture is not supported by your system&quot;</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="c"># choose the sample rate</span>
	<span class="n">sample_rate</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s">&quot;Please choose the sample rate for sound capture (44100 is CD quality): &quot;</span><span class="p">))</span>

	<span class="c"># wait for user input...</span>
	<span class="nb">input</span><span class="p">(</span><span class="s">&quot;Press enter to start recording audio&quot;</span><span class="p">)</span>

	<span class="c"># here we&#39;ll use an integrated custom recorder, which saves the captured data into a sf.SoundBuffer</span>
	<span class="n">recorder</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">SoundBufferRecorder</span><span class="p">()</span>

	<span class="c"># audio capture is done in a separate thread, so we can block the main thread while it is capturing</span>
	<span class="n">recorder</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">sample_rate</span><span class="p">)</span>
	<span class="nb">input</span><span class="p">(</span><span class="s">&quot;Recording... press enter to stop&quot;</span><span class="p">)</span>
	<span class="n">recorder</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

	<span class="c"># get the buffer containing the captured data</span>
	<span class="nb">buffer</span> <span class="o">=</span> <span class="n">recorder</span><span class="o">.</span><span class="n">buffer</span>

	<span class="c"># display captured sound informations</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;Sound information:&quot;</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;{0} seconds&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">buffer</span><span class="o">.</span><span class="n">duration</span><span class="p">))</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;{0} samples / seconds&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">buffer</span><span class="o">.</span><span class="n">sample_rate</span><span class="p">))</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;{0} channels&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">buffer</span><span class="o">.</span><span class="n">channel_count</span><span class="p">))</span>

	<span class="c"># choose what to do with the recorded sound data</span>
	<span class="n">choice</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">&quot;What do you want to do with captured sound (p = play, s = save) ? &quot;</span><span class="p">)</span>

	<span class="k">if</span> <span class="n">choice</span> <span class="o">==</span> <span class="s">&#39;s&#39;</span><span class="p">:</span>
		<span class="c"># choose the filename</span>
		<span class="n">filename</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">&quot;Choose the file to create: &quot;</span><span class="p">)</span>

		<span class="c"># save the buffer</span>
		<span class="nb">buffer</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="c"># create a sound instance and play it</span>
		<span class="n">sound</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Sound</span><span class="p">(</span><span class="nb">buffer</span><span class="p">)</span>
		<span class="n">sound</span><span class="o">.</span><span class="n">play</span><span class="p">();</span>

		<span class="c"># wait until finished</span>
		<span class="k">while</span> <span class="n">sound</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">sf</span><span class="o">.</span><span class="n">Sound</span><span class="o">.</span><span class="n">PLAYING</span><span class="p">:</span>
			<span class="c"># leave some CPU time for other threads</span>
			<span class="n">sf</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>

	<span class="c"># finished !</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;Done !&quot;</span><span class="p">)</span>

	<span class="c"># wait until the user presses &#39;enter&#39; key</span>
	<span class="nb">input</span><span class="p">(</span><span class="s">&quot;Press enter to exit...&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
	<span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="sound">
<h2><a class="toc-backref" href="#id7">Sound</a><a class="headerlink" href="#sound" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python3</span>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="c">#</span>
<span class="c"># pySFML - Python bindings for SFML</span>
<span class="c"># Copyright 2013, Jonathan De Wachter &lt;dewachter.jonathan@gmail.com&gt;</span>
<span class="c">#</span>
<span class="c"># This software is released under the LGPLv3 license.</span>
<span class="c"># You should have received a copy of the GNU Lesser General Public License</span>
<span class="c"># along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>

<span class="kn">import</span> <span class="nn">sfml</span> <span class="kn">as</span> <span class="nn">sf</span>

<span class="k">def</span> <span class="nf">play_sound</span><span class="p">():</span>
	<span class="c"># load a sound buffer from a wav file</span>
	<span class="nb">buffer</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">SoundBuffer</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s">&quot;data/canary.wav&quot;</span><span class="p">)</span>

	<span class="c"># display sound informations</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;canary.wav:&quot;</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;{0} seconds&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">buffer</span><span class="o">.</span><span class="n">duration</span><span class="p">))</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;{0} samples / sec&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">buffer</span><span class="o">.</span><span class="n">sample_rate</span><span class="p">))</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;{0} channels&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">buffer</span><span class="o">.</span><span class="n">channel_count</span><span class="p">))</span>

	<span class="c"># create a sound instance and play it</span>
	<span class="n">sound</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Sound</span><span class="p">(</span><span class="nb">buffer</span><span class="p">)</span>
	<span class="n">sound</span><span class="o">.</span><span class="n">play</span><span class="p">();</span>

	<span class="c"># loop while the sound is playing</span>
	<span class="k">while</span> <span class="n">sound</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">sf</span><span class="o">.</span><span class="n">Sound</span><span class="o">.</span><span class="n">PLAYING</span><span class="p">:</span>
		<span class="c"># leave some CPU time for other processes</span>
		<span class="n">sf</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">play_music</span><span class="p">():</span>
	<span class="c"># load an ogg music file    </span>
	<span class="n">music</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Music</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s">&quot;data/orchestral.ogg&quot;</span><span class="p">)</span>

	<span class="c"># display music informations</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;orchestral.ogg:&quot;</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;{0} seconds&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">music</span><span class="o">.</span><span class="n">duration</span><span class="p">))</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;{0} samples / sec&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">music</span><span class="o">.</span><span class="n">sample_rate</span><span class="p">))</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;{0} channels&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">music</span><span class="o">.</span><span class="n">channel_count</span><span class="p">))</span>

	<span class="c"># play it</span>
	<span class="n">music</span><span class="o">.</span><span class="n">play</span><span class="p">();</span>

	<span class="c"># loop while the music is playing</span>
	<span class="k">while</span> <span class="n">music</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">sf</span><span class="o">.</span><span class="n">Music</span><span class="o">.</span><span class="n">PLAYING</span><span class="p">:</span>
		<span class="c"># leave some CPU time for other processes</span>
		<span class="n">sf</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
	<span class="n">play_sound</span><span class="p">()</span>
	<span class="n">play_music</span><span class="p">()</span>

	<span class="nb">input</span><span class="p">(</span><span class="s">&quot;Press enter to exit...&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="voip">
<h2><a class="toc-backref" href="#id8">Voip</a><a class="headerlink" href="#voip" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python3</span>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="c">#</span>
<span class="c"># pySFML - Python bindings for SFML</span>
<span class="c"># Copyright 2013, Jonathan De Wachter &lt;dewachter.jonathan@gmail.com&gt;</span>
<span class="c">#</span>
<span class="c"># This software is released under the LGPLv3 license.</span>
<span class="c"># You should have received a copy of the GNU Lesser General Public License</span>
<span class="c"># along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>

<span class="kn">import</span> <span class="nn">sfml</span> <span class="kn">as</span> <span class="nn">sf</span>
<span class="kn">import</span> <span class="nn">client</span><span class="o">,</span> <span class="nn">server</span>

<span class="c"># python 2.* compatability</span>
<span class="k">try</span><span class="p">:</span> <span class="nb">input</span> <span class="o">=</span> <span class="nb">raw_input</span> 
<span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span> <span class="k">pass</span>

<span class="c"># choose a random port for opening sockets (ports &lt; 1024 are reserved)</span>
<span class="n">PORT</span> <span class="o">=</span> <span class="mi">2435</span>

<span class="c"># client or server ?</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Do you want to be a server (s) or a client (c) ?&quot;</span><span class="p">)</span>
<span class="n">who</span> <span class="o">=</span> <span class="nb">input</span><span class="p">()</span>

<span class="k">if</span> <span class="n">who</span> <span class="o">==</span> <span class="s">&#39;s&#39;</span><span class="p">:</span>
	<span class="n">server</span><span class="o">.</span><span class="n">do_server</span><span class="p">(</span><span class="n">PORT</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
	<span class="n">client</span><span class="o">.</span><span class="n">do_client</span><span class="p">(</span><span class="n">PORT</span><span class="p">)</span>

<span class="nb">input</span><span class="p">(</span><span class="s">&quot;Press any key to exit...&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python3</span>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="c">#</span>
<span class="c"># pySFML - Python bindings for SFML</span>
<span class="c"># Copyright 2013, Jonathan De Wachter &lt;dewachter.jonathan@gmail.com&gt;</span>
<span class="c">#</span>
<span class="c"># This software is released under the LGPLv3 license.</span>
<span class="c"># You should have received a copy of the GNU Lesser General Public License</span>
<span class="c"># along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>

<span class="kn">import</span> <span class="nn">sfml</span> <span class="kn">as</span> <span class="nn">sf</span>
<span class="kn">from</span> <span class="nn">struct</span> <span class="kn">import</span> <span class="n">pack</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>

<span class="c"># python 2.* compatability</span>
<span class="k">try</span><span class="p">:</span> <span class="nb">input</span> <span class="o">=</span> <span class="nb">raw_input</span> 
<span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span> <span class="k">pass</span>

<span class="n">AUDIO_DATA</span><span class="p">,</span> <span class="n">END_OF_STREAM</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">NetworkRecorder</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">SoundRecorder</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">):</span>
		<span class="n">sf</span><span class="o">.</span><span class="n">SoundRecorder</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">host</span> <span class="c"># address of the remote host</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">port</span> <span class="o">=</span> <span class="n">port</span> <span class="c"># remote port</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">socket</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">TcpSocket</span><span class="p">()</span> <span class="c"># socket used to communicate with the server</span>

	<span class="k">def</span> <span class="nf">on_start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">try</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="p">)</span>
		<span class="k">except</span> <span class="n">sf</span><span class="o">.</span><span class="n">SocketException</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span> <span class="k">return</span> <span class="bp">False</span>

		<span class="k">return</span> <span class="bp">True</span>

	<span class="k">def</span> <span class="nf">on_process_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">chunk</span><span class="p">):</span>
		<span class="c"># pack the audio samples</span>
		<span class="n">data</span> <span class="o">=</span> <span class="n">pack</span><span class="p">(</span><span class="s">&quot;B&quot;</span><span class="p">,</span> <span class="n">AUDIO_DATA</span><span class="p">)</span>
		<span class="n">data</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="s">&quot;I&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">chunk</span><span class="o">.</span><span class="n">data</span><span class="p">))</span>
		<span class="n">data</span> <span class="o">+=</span> <span class="n">chunk</span><span class="o">.</span><span class="n">data</span>

		<span class="c"># send the audio packet</span>
		<span class="k">try</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
		<span class="k">except</span> <span class="n">sf</span><span class="o">.</span><span class="n">SocketException</span><span class="p">:</span> <span class="k">return</span> <span class="bp">False</span>

		<span class="k">return</span> <span class="bp">True</span>

	<span class="k">def</span> <span class="nf">on_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="c"># send a &quot;end-of-stream&quot; signal</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="nb">bytes</span><span class="p">(</span><span class="n">END_OF_STREAM</span><span class="p">))</span>

		<span class="c"># close the socket</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">do_client</span><span class="p">(</span><span class="n">port</span><span class="p">):</span>
	<span class="c"># check that the device can capture audio</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">sf</span><span class="o">.</span><span class="n">SoundRecorder</span><span class="o">.</span><span class="n">is_available</span><span class="p">():</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;Sorry, audio capture is not supported by your system&quot;</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="c"># ask for server address</span>
	<span class="n">server</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">&quot;Type address or name of the server to connect to: &quot;</span><span class="p">)</span>
	<span class="n">server</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">IpAddress</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">server</span><span class="p">)</span>

	<span class="c"># create an instance of our custom recorder</span>
	<span class="n">recorder</span> <span class="o">=</span> <span class="n">NetworkRecorder</span><span class="p">(</span><span class="n">server</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>

	<span class="c"># wait for the user input...</span>
	<span class="nb">input</span><span class="p">(</span><span class="s">&quot;Press enter to start recording audio&quot;</span><span class="p">)</span>

	<span class="c"># start capturing audio data</span>
	<span class="n">recorder</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="mi">44100</span><span class="p">)</span>
	<span class="nb">input</span><span class="p">(</span><span class="s">&quot;Recording... press enter to stop&quot;</span><span class="p">)</span>
	<span class="n">recorder</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python3</span>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="c">#</span>
<span class="c"># pySFML - Python bindings for SFML</span>
<span class="c"># Copyright 2013, Jonathan De Wachter &lt;dewachter.jonathan@gmail.com&gt;</span>
<span class="c">#</span>
<span class="c"># This software is released under the LGPLv3 license.</span>
<span class="c"># You should have received a copy of the GNU Lesser General Public License</span>
<span class="c"># along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>

<span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
<span class="kn">import</span> <span class="nn">sfml</span> <span class="kn">as</span> <span class="nn">sf</span>
<span class="kn">from</span> <span class="nn">struct</span> <span class="kn">import</span> <span class="n">unpack</span>

<span class="c"># python 2.* compatability</span>
<span class="k">try</span><span class="p">:</span> <span class="nb">input</span> <span class="o">=</span> <span class="nb">raw_input</span> 
<span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span> <span class="k">pass</span>

<span class="n">AUDIO_DATA</span><span class="p">,</span> <span class="n">END_OF_STREAM</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">NetworkAudioStream</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">SoundStream</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">sf</span><span class="o">.</span><span class="n">SoundStream</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">has_finished</span> <span class="o">=</span> <span class="bp">False</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">listener</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">TcpListener</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">samples</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Chunk</span><span class="p">()</span>

		<span class="c"># set the sound parameters</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">44100</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">port</span><span class="p">):</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_finished</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="c"># listen to the given port for incoming connections</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">listener</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">port</span><span class="p">)</span>
				<span class="k">print</span><span class="p">(</span><span class="s">&quot;Server is listening to port {0}, waiting for connections... &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">port</span><span class="p">))</span>

				<span class="c"># wait for a connection</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">listener</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
				<span class="k">print</span><span class="p">(</span><span class="s">&quot;Client connected: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">remote_address</span><span class="p">))</span>

			<span class="k">except</span> <span class="n">sf</span><span class="o">.</span><span class="n">SocketException</span><span class="p">:</span> <span class="k">return</span>

			<span class="c"># start playback</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>

			<span class="c"># start receiving audio data</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">receive_loop</span><span class="p">()</span>

		<span class="k">else</span><span class="p">:</span>
			<span class="c"># start playback</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">on_get_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">chunk</span><span class="p">):</span>
		<span class="c"># we have reached the end of the buffer and all audio data have been played : we can stop playback</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">samples</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_finished</span><span class="p">:</span>
			<span class="k">return</span> <span class="bp">False</span>

		<span class="c"># no new data has arrived since last update : wait until we get some</span>
		<span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">samples</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_finished</span><span class="p">:</span>
			<span class="n">sf</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>

		<span class="c"># don&#39;t forget to lock as we run in two separate threads</span>
		<span class="n">lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
		<span class="n">lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>

		<span class="c"># fill audio data to pass to the stream</span>
		<span class="n">chunk</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">samples</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="o">*</span><span class="mi">2</span><span class="p">:]</span>

		<span class="c"># update the playing offset</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>

		<span class="n">lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

		<span class="k">return</span> <span class="bp">True</span>

	<span class="k">def</span> <span class="nf">on_seek</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_offset</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">time_offset</span><span class="o">.</span><span class="n">milliseconds</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample_rate</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">channel_count</span> <span class="o">//</span> <span class="mi">1000</span>

	<span class="k">def</span> <span class="nf">receive_loop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">RLock</span><span class="p">()</span>

		<span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_finished</span><span class="p">:</span>
			<span class="c"># get waiting audio data from the network</span>
			<span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">receive</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

			<span class="c"># extract the id message</span>
			<span class="nb">id</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s">&quot;B&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

			<span class="k">if</span> <span class="nb">id</span> <span class="o">==</span> <span class="n">AUDIO_DATA</span><span class="p">:</span>
				<span class="c"># extract audio samples from the packet, and append it to our samples buffer</span>
				<span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">receive</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
				<span class="n">sample_count</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s">&quot;I&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

				<span class="n">samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">receive</span><span class="p">(</span><span class="n">sample_count</span><span class="p">)</span>

				<span class="c"># don&#39;t forget the other thread can access the sample array at any time</span>
				<span class="n">lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">samples</span><span class="o">.</span><span class="n">data</span> <span class="o">+=</span> <span class="n">samples</span>
				<span class="n">lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

			<span class="k">elif</span> <span class="nb">id</span> <span class="o">==</span> <span class="n">END_OF_STREAM</span><span class="p">:</span>
				<span class="c"># end of stream reached : we stop receiving audio data</span>
				<span class="k">print</span><span class="p">(</span><span class="s">&quot;Audio data has been 100</span><span class="si">% r</span><span class="s">eceived!&quot;</span><span class="p">)</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">has_finished</span> <span class="o">=</span> <span class="bp">True</span>

			<span class="k">else</span><span class="p">:</span>
				<span class="c"># something&#39;s wrong...</span>
				<span class="k">print</span><span class="p">(</span><span class="s">&quot;Invalid data received...&quot;</span><span class="p">)</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">has_finished</span> <span class="o">=</span> <span class="bp">True</span>

<span class="k">def</span> <span class="nf">do_server</span><span class="p">(</span><span class="n">port</span><span class="p">):</span>
	<span class="c"># build an audio stream to play sound data as it is received through the network</span>
	<span class="n">audio_stream</span> <span class="o">=</span> <span class="n">NetworkAudioStream</span><span class="p">()</span>
	<span class="n">audio_stream</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">port</span><span class="p">)</span>

	<span class="c"># loop until the sound playback is finished</span>
	<span class="k">while</span> <span class="n">audio_stream</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="n">sf</span><span class="o">.</span><span class="n">SoundStream</span><span class="o">.</span><span class="n">STOPPED</span><span class="p">:</span>
		<span class="c"># leave some CPU time for other threads</span>
		<span class="n">sf</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>


	<span class="c"># wait until the user presses &#39;enter&#39; key</span>
	<span class="nb">input</span><span class="p">(</span><span class="s">&quot;Press enter to replay the sound...&quot;</span><span class="p">)</span>

	<span class="c"># replay the sound (just to make sure replaying the received data is OK)</span>
	<span class="n">audio_stream</span><span class="o">.</span><span class="n">play</span><span class="p">();</span>

	<span class="c"># loop until the sound playback is finished</span>
	<span class="k">while</span> <span class="n">audio_stream</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="n">sf</span><span class="o">.</span><span class="n">SoundStream</span><span class="o">.</span><span class="n">STOPPED</span><span class="p">:</span>
		<span class="n">sf</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="spacial-music">
<h2><a class="toc-backref" href="#id9">Spacial Music</a><a class="headerlink" href="#spacial-music" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python3</span>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="c">#</span>
<span class="c"># pySFML - Python bindings for SFML</span>
<span class="c"># Copyright 2013, Jonathan De Wachter &lt;dewachter.jonathan@gmail.com&gt;</span>
<span class="c">#</span>
<span class="c"># This software is released under the LGPLv3 license.</span>
<span class="c"># You should have received a copy of the GNU Lesser General Public License</span>
<span class="c"># along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>

<span class="kn">import</span> <span class="nn">sfml</span> <span class="kn">as</span> <span class="nn">sf</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">song</span><span class="p">):</span>
    <span class="n">window</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">RenderWindow</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">VideoMode</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">800</span><span class="p">),</span> <span class="s">&quot;pySFML - Spacial Music&quot;</span><span class="p">)</span>
    <span class="n">window</span><span class="o">.</span><span class="n">framerate_limit</span> <span class="o">=</span> <span class="mi">60</span>
    
    <span class="c"># load a song and make sure it can be spacialized</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">music</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Music</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">song</span><span class="p">)</span>
        
    <span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;An error occured during the loading data process:</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">error</span><span class="p">))</span>
        <span class="nb">exit</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">music</span><span class="o">.</span><span class="n">channel_count</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;Only sounds with one channel (mono sounds) can be spatialized.&quot;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;This song ({0}) has {1} channels.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SONG</span><span class="p">,</span> <span class="n">music</span><span class="o">.</span><span class="n">channels_count</span><span class="p">))</span>
        <span class="nb">exit</span><span class="p">()</span>

    <span class="c"># by default, the music is not relative to the listener</span>
    <span class="c">#music.relative_to_listener = True</span>
    
    <span class="n">hears_position</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Vector3</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">speaker_position</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Vector3</span><span class="p">(</span><span class="mi">350</span><span class="p">,</span> <span class="mi">348</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    
    <span class="n">sf</span><span class="o">.</span><span class="n">Listener</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">hears_position</span><span class="p">)</span>
    <span class="n">music</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">speaker_position</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">hears_texture</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Texture</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s">&quot;data/head_kid.png&quot;</span><span class="p">)</span>
        <span class="n">speaker_texture</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Texture</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s">&quot;data/speaker.gif&quot;</span><span class="p">)</span>
        
    <span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;An error occured during the loading data process:</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">error</span><span class="p">))</span>
        <span class="nb">exit</span><span class="p">()</span>
        
    <span class="n">hears</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Sprite</span><span class="p">(</span><span class="n">hears_texture</span><span class="p">)</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">hears_position</span>
    <span class="n">hears</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Vector2</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    
    <span class="n">speaker</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Sprite</span><span class="p">(</span><span class="n">speaker_texture</span><span class="p">)</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">speaker_position</span>
    <span class="n">speaker</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Vector2</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    
    <span class="n">music</span><span class="o">.</span><span class="n">min_distance</span> <span class="o">=</span> <span class="mi">200</span>
    <span class="n">music</span><span class="o">.</span><span class="n">attenuation</span> <span class="o">=</span> <span class="mi">1</span>
    
    <span class="n">music</span><span class="o">.</span><span class="n">loop</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">music</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>
    
    <span class="n">loop</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">while</span> <span class="n">loop</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">window</span><span class="o">.</span><span class="n">events</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="ow">is</span> <span class="n">sf</span><span class="o">.</span><span class="n">CloseEvent</span><span class="p">:</span>
                <span class="n">loop</span> <span class="o">=</span> <span class="bp">False</span>
                
            <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="ow">is</span> <span class="n">sf</span><span class="o">.</span><span class="n">KeyEvent</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">pressed</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">code</span> <span class="ow">is</span> <span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">UP</span><span class="p">:</span>
                    <span class="n">hears_position</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="mi">5</span>
                    <span class="n">sf</span><span class="o">.</span><span class="n">Listener</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">hears_position</span><span class="p">)</span>
                    
                    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">hears_position</span>
                    <span class="n">hears</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                    
                <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">code</span> <span class="ow">is</span> <span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">DOWN</span><span class="p">:</span>
                    <span class="n">hears_position</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">5</span>
                    <span class="n">sf</span><span class="o">.</span><span class="n">Listener</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">hears_position</span><span class="p">)</span>
                    
                    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">hears_position</span>
                    <span class="n">hears</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                    
                <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">code</span> <span class="ow">is</span> <span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">LEFT</span><span class="p">:</span>
                    <span class="n">hears_position</span><span class="o">.</span><span class="n">x</span> <span class="o">-=</span> <span class="mi">5</span>
                    <span class="n">sf</span><span class="o">.</span><span class="n">Listener</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">hears_position</span><span class="p">)</span>
                    
                    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">hears_position</span>
                    <span class="n">hears</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                    
                <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">code</span> <span class="ow">is</span> <span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">RIGHT</span><span class="p">:</span>
                    <span class="n">hears_position</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">5</span>
                    <span class="n">sf</span><span class="o">.</span><span class="n">Listener</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">hears_position</span><span class="p">)</span>
                    
                    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">hears_position</span>
                    <span class="n">hears</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>


        <span class="n">window</span><span class="o">.</span><span class="n">clear</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">WHITE</span><span class="p">)</span>
        <span class="n">window</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">speaker</span><span class="p">)</span>
        <span class="n">window</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">hears</span><span class="p">)</span>
        <span class="n">window</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
        
    <span class="n">window</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    
    
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">(</span><span class="s">&quot;data/mario.flac&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/sfml2-logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Examples</a><ul>
<li><a class="reference internal" href="#ftp">Ftp</a></li>
<li><a class="reference internal" href="#pong">Pong</a></li>
<li><a class="reference internal" href="#pyqt4">PyQt4</a></li>
<li><a class="reference internal" href="#shader">Shader</a></li>
<li><a class="reference internal" href="#sockets">Sockets</a></li>
<li><a class="reference internal" href="#sound-capture">Sound capture</a></li>
<li><a class="reference internal" href="#sound">Sound</a></li>
<li><a class="reference internal" href="#voip">Voip</a></li>
<li><a class="reference internal" href="#spacial-music">Spacial Music</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="gettingstarted.html"
                        title="previous chapter">Getting started</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="tutorials.html"
                        title="next chapter">Tutorials</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/examples.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tutorials.html" title="Tutorials"
             >next</a> |</li>
        <li class="right" >
          <a href="gettingstarted.html" title="Getting started"
             >previous</a> |</li>
        <li><a href="index.html">pySFML 1.2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Jonathan De Wachter.
      Last updated on Jan 02, 2013.
    </div>
  </body>
</html>